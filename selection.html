<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Sacramento&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Sacramento&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/53ff950d67.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Document</title>
</head>
<body class="bring">
    <a class="home" href="#">dribbble</a>
    <section class="describing">
        <header class="about-you">
            <h1 class="about-heading">What brings you to Dribble?</h1>
            <p class="about-para">select the option that best describes you. Don't worry, you can explore other options later.</p>
        </header>
        <section class="selection">
            <form action="selection.php" method="post">
                <section class="check-box">
                    <section class="custom-checkbox">
                        <label  for="design-img1">
                            <div class="checkbox-content" id="checkbox-content">
                              <img class="design-img" src="images/onboarding-designer_4x-modified.png" alt="Image">
                              <h2>I'm a designer looking to share my work</h2>
                              <p >"As a designer eager to showcase my portfolio and connect with fellow creatives, I'm excited to share my latest work and collaborate on new projects. Let's explore possibilities together!"</p>
                              <input type="hidden" >
                              <input type="hidden" name="selection_description_1" value="As a designer eager to showcase my portfolio and connect with fellow creatives, I'm excited to share my latest work and collaborate on new projects. Let's explore possibilities together!">
                              <input type="checkbox" id="design-img1" name="selection_id_1" value="1">
                              <span class="checkmark"></span>
                            </div>
                          </label>
                    </section>
                      <section class="custom-checkbox">
                        <label  for="design-img2">
                            <div class="checkbox-content"  >
                              <img class="design-img" src="images/image_processing20191028-14376-bjtjet-modified.png" alt="Image">
                              <h2>I'm looking to hire a Designer</h2>
                              <p name="selection_description">"I'm in search of a talented designer to join my team and bring creative vision to our projects. If you're a skilled designer seeking exciting opportunities, let's connect!"</p>
                              <input type="hidden" >
                              <input type="hidden" name="selection_description_2" value="I'm in search of a talented designer to join my team and bring creative vision to our projects. If you're a skilled designer seeking exciting opportunities, let's connect!">
                              <input type="checkbox" id="design-img2"  name="selection_id_2" value="2">
                              <span class="checkmark"></span>
                            </div>
                          </label>
                      </section>
                      <section class="custom-checkbox">
                        <label for="design-img3">
                            <div class="checkbox-content">
                                <img class="design-img" src="images/81ebf0ef3aec49dde5657bd4b1f5a459-modified.png" alt="Image">
                                <h2>I'm looking for design inspiration</h2>
                                <p >"With over 7 million shots from a vast community of designers, Dribbble is a the leading source for design inspiration"</p>
                                <input type="hidden" > <!-- Assuming selection_id is static -->
                                <input type="hidden" name="selection_description_3" value="With over 7 million shots from a vast community of designers, Dribbble is a the leading source for design inspiration">
                                <input type="checkbox" id="design-img3" name="selection_id_3" value="3">
                                <span class="checkmark"></span>
                            </div>
                        </label>
                        
                      </section>
                      
                </section>
                <section class="info">
                    <p>Anything else? You can select multiple</p>
                </section>
                <button type="submit">finish</button>
                <section id="instruction">Or press Return</section>
                <div id="message-container"></div> 
            </form>
        </section>
    </section>
    <script>
                document.addEventListener('DOMContentLoaded', function() {
            const checkboxElements = document.querySelectorAll('.checkbox-content input[type="checkbox"]');
            const finishButton = document.querySelector('button[type="submit"]');
            const instructionElement = document.getElementById('instruction');

            function isAnyCheckboxChecked() {
                return Array.from(checkboxElements).some(checkbox => checkbox.checked);
            }

            function toggleFinishButtonState() {
                if (isAnyCheckboxChecked()) {
                    finishButton.removeAttribute('disabled');
                    finishButton.style.backgroundColor = '#ff217a';
                    instructionElement.style.display = 'block';
                    finishButton.style.cursor='pointer';
                } else {
                    finishButton.setAttribute('disabled', 'disabled');
                    finishButton.style.backgroundColor = 'pink';
                    instructionElement.style.display = 'none';
                    finishButton.style.cursor='not-allowed';
                }
            }

            checkboxElements.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    const checkboxContent = checkbox.closest('.checkbox-content');
                    checkboxContent.classList.toggle('active');
                    const customCheckbox = checkboxContent.closest('.custom-checkbox');
                    customCheckbox.classList.toggle('active-border');
                    const allChecked = Array.from(checkboxElements).every(checkbox => checkbox.checked);
                    const section = checkbox.closest('.selection');
                    if (allChecked) {
                        section.classList.add('active');
                    } else {
                        section.classList.remove('active');
                    }
                    toggleFinishButtonState();
                });
            });

            toggleFinishButtonState();
        });

        window.addEventListener('pageshow', function(event) {
            var historyTraversal = event.persisted || 
                                  (typeof window.performance !== 'undefined' && 
                                      window.performance.navigation.type === 2);
            if (historyTraversal) {
                window.location.reload();
            }
        }); 


//         document.addEventListener('DOMContentLoaded', function() {
//     const form = document.querySelector('form');
//     const messageContainer = document.getElementById('message-container');

//     form.addEventListener('submit', function(event) {
//         event.preventDefault(); // Prevent the default form submission behavior
        
//         const formData = new FormData(form); // Create a FormData object from the form
        
//         // Make a POST request to the server
//         fetch('selection.php', {
//             method: 'POST',
//             body: formData
//         })
//         .then(response => {
//             if (response.ok) {
//                 // If the response is successful, display success message
//                 messageContainer.textContent = 'Selections uploaded successfully!';
//                 messageContainer.classList.remove('error');
//                 messageContainer.classList.add('success');
//                 // Optionally, you can redirect after a delay
//                 setTimeout(function() {
//                     window.location.href = 'selection.html';
//                 }); // 2000 milliseconds (2 seconds) delay before redirecting
//             } else {
//                 // If there's an error, display error message
//                 messageContainer.textContent = 'Error uploading selections. Please try again.';
//                 messageContainer.classList.remove('success');
//                 messageContainer.classList.add('error');
//             }
//         })
//         .catch(error => {
//             // If there's an error, display error message
//             messageContainer.textContent = 'Error uploading selections. Please try again.';
//             messageContainer.classList.remove('success');
//             messageContainer.classList.add('error');
//             console.error('Error:', error);
//         });
//     });
// });


        
        document.addEventListener('DOMContentLoaded', function() {
            const checkboxElements = document.querySelectorAll('.checkbox-content input[type="checkbox"]');
            const finishButton = document.querySelector('button[type="submit"]');
            const instructionElement = document.getElementById('instruction');

            function isAnyCheckboxChecked() {
                return Array.from(checkboxElements).some(checkbox => checkbox.checked);
            }

            function toggleFinishButtonState() {
                if (isAnyCheckboxChecked()) {
                    finishButton.removeAttribute('disabled');
                    finishButton.style.backgroundColor = '#ff217a';
                    instructionElement.style.display = 'block';
                    finishButton.style.cursor = 'pointer';
                } else {
                    finishButton.setAttribute('disabled', 'disabled');
                    finishButton.style.backgroundColor = 'pink';
                    instructionElement.style.display = 'none';
                    finishButton.style.cursor = 'not-allowed';
                }
            }

            checkboxElements.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    // Checkbox change event handling code as before
                    toggleFinishButtonState();
                });
            });

            toggleFinishButtonState();
        });

        window.addEventListener('pageshow', function(event) {
            // Page reload event handling code as before
        });

        // Optional: Add event listener for form submission
        document.getElementById('selection-form').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the default form submission behavior

            // Serialize the form data
            const formData = new FormData(this);
            // Add additional form data if needed

            // Make a POST request to the server
            fetch('submit.php', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    // Handle successful response
                } else {
                    // Handle error response
                }
            })
            .catch(error => {
                // Handle network error
            });
        });+



    </script>
</body>
</html>